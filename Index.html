<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Include Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v7.0.0/dist/aframe-extras.min.js"></script> -->
    <script src="./js/locutor-model.js"></script>
    <script src="./js/speech-target.js"></script>
    <script src="./js/star-spawner.js"></script>
    <script src="./initapp.js"></script>
    <script src="./js/home-feed.js"></script>
    <link rel="stylesheet" href="index.css">

</head>

<body>


    <main style="z-index: 1000">
        <div id="initSection">
            <!-- Home Section: Display posts -->
            <!-- <h2>Home</h2> -->
            <div class="bottom-center">
                <button class="ok-button" id="start-button">INICIAR</button>
            </div>
        </div>

        <div id="homeSection">
            <!-- Home Section: Display posts -->
            <h1>Home</h1>
            <div class="feed" id="feed">
                <!-- Initial posts go here -->
            </div>

        </div>

        <div id="announcementSection">
            <!-- Section 1: List of buttons with actions -->
            <div id="announcement-List" class="listGlowButton">
                <h1>Mensajes</h1>
                <div id="announcement-btn" class="announcement-button">
                    <span class="announcement-button-border"></span>
                    Anuncio 1
                </div>
            </div>
            <div id="ar-warnings">
                <h1>PRECAUCIÃ“N </h1>
                <div id="warning-img-container" class="image-warning-container">
                    <div id="ar-warning-img" alt="Description of the image" class="resized-image">
                    </div>
                </div>
                <p id="warning-text">text</p>
                <button id="warning-button" class="ok-button">CONTINUAR</button>
            </div>
        </div>

        <div id="missionSection">
            <div id="missionList" class="listGlowButton">
                <h1>Misiones</h1>
                <div style="padding: 15 0;" class="announcement-button">
                    <span class="announcement-button-border"></span>
                    Mision 1
                </div>
                <div style="padding: 15 0;" class="announcement-button">
                    <span class="announcement-button-border"></span>
                    Mision 2
                </div>
            </div>
        </div>
    </main>


    <a-scene background="color: #13131c"
        mindar-image="imageTargetSrc: /Assets/Targets.mind; autoStart: false ;uiScanning:no" gltf-model="dracoDecoderPath: https://www.gstatic.com/draco/versioned/decoders/1.5.6/;
                        basisTranscoderPath:https://cdn.jsdelivr.net/npm/three@0.154.0/examples/jsm/libs/basis/;"
        device-orientation-permission-ui="enabled: false" vr-mode-ui="enabled: false">

        <a-assets timeout="5000">
            <a-asset-item id="Locutor" src="/Assets/LocutionCompressedTexture.glb"></a-asset-item>
            <a-asset-item id="Planet" src="/Assets/PlanetLowPoly.glb"></a-asset-item>
            <a-asset-item id="Star" src="/Assets/StarLowPoly.glb"></a-asset-item>
            <a-mixin id="star-model" gltf-model="#Star"></a-mixin>
            <!-- <a-mixin id="star-model" geometry="primitive: box"></a-mixin> -->
            <img id="icon-play" src="/Assets/PlayMediaIcon.png" />
            <img id="icon-stop" src="/Assets/StopIcon.png" />
            <audio id="SpeechAudio" src="Assets/AudioSpeech.mp3" preload="auto"></audio>
        </a-assets>

        <!-- <a-sky id="sky-scene" color="#13131c"></a-sky> -->

        <a-entity id="audioSpeech" sound="src: #SpeechAudio; loop:false"></a-entity>

        <a-camera position="0 0 0" look-controls="enabled: false" cursor="fuse: false; rayOrigin: mouse;"
            raycaster="far: ${customFields.libVersion}; objects: .clickable"></a-camera>

        <a-entity position="0 0 0" visible="true" pool="mixin: star-model; size: 17" id="universeHome"
            animation="property:position;to:0 0 -11;loop: false; dur: 600;startEvents: startanim001">
            <a-entity star-spawner></a-entity>
            <a-entity id="planetModel" gltf-model="#Planet" position="0 0 -4.8" rotation="0 0 0" scale="0.43 0.43 0.43"
                animation="property:rotation;to:0 -360 0;loop: true; dur: 80000;easing: linear"></a-entity>
        </a-entity>

        <a-entity speech-target mindar-image-target="targetIndex: 0">
            <a-entity locutor-model visible="true" id="locutorModel" gltf-model="#Locutor" position="0 0 0"
                rotation="90 90 90" scale="0.5 0.5 0.5"></a-entity>
            <a-image id="media-button" class="clickable" src="#icon-play" alpha-test="0.8" position="0 -0.5 0"
                height="0.25" width="0.25"
                animation="property: scale; to: 1.2 1.2 1.2; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate"></a-image>
        </a-entity>
    </a-scene>


    <footer style="z-index: 1001">
        <button id="homeFooterButton" class="icon-footer-button "><i class="fas fa-home"></i></button>
        <button id="announcementFooterButton" class="icon-footer-button "><i class="fas fa-bullhorn"></i></button>
        <button id="missionFooterButton" class="icon-footer-button  "><i class="fas fa-flag"></i></button>
    </footer>

</body>

</html>